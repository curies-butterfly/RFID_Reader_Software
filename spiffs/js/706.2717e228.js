(self["webpackChunkvue_module"]=self["webpackChunkvue_module"]||[]).push([[706],{7706:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dataManageContainer"},[t("div",{staticClass:"dataManageTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.currentPageData,"element-loading-text":"加载中...",border:!0,stripe:!0,"cell-style":e.cellStyle,"header-cell-style":e.headerStyle}},[t("el-table-column",{attrs:{prop:"epc",label:"EPC_ID",align:"center"}}),t("el-table-column",{attrs:{prop:"tem",label:"数据",align:"center"}}),t("el-table-column",{attrs:{prop:"ant",label:"天线编号",align:"center"}}),t("el-table-column",{attrs:{prop:"rssi",label:"信号质量",align:"center"}})],1),t("el-pagination",{staticStyle:{"background-color":"white"},attrs:{background:"",layout:"prev, pager, next",total:e.totalNum,"page-size":16},on:{"current-change":e.pageChange}})],1),t("div",{staticClass:"dataManageForm"},[t("div",{staticStyle:{overflow:"auto",width:"90%",border:"1px solid #dbdee5","border-radius":"5px"}},[t("h3",{staticClass:"system-title"},[e._v("RFID 读取参数设置")]),t("el-form",{staticStyle:{margin:"5px 0 0 15%"},attrs:{size:"mini"}},[t("el-form-item",{attrs:{label:"开关:","label-width":"30%"}},[t("el-switch",{attrs:{"active-text":"on","inactive-text":"off"},on:{change:e.rfidRead},model:{value:e.rfidForm.on_off,callback:function(t){e.$set(e.rfidForm,"on_off",t)},expression:"rfidForm.on_off"}})],1),t("el-form-item",{attrs:{label:"读取模式:","label-width":"30%"}},[t("el-select",{staticStyle:{"text-align":"center"},model:{value:e.rfidForm.read_mode,callback:function(t){e.$set(e.rfidForm,"read_mode",t)},expression:"rfidForm.read_mode"}},e._l(e.timeMode,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"读取间隔(ms):","label-width":"30%"}},[t("el-input-number",{staticStyle:{width:"65%"},attrs:{"controls-position":"right",step:50},model:{value:e.rfidForm.interval_time,callback:function(t){e.$set(e.rfidForm,"interval_time",t)},expression:"rfidForm.interval_time"}})],1),t("el-form-item",[t("el-checkbox-group",{on:{change:e.handleCheckboxChange},model:{value:e.ant_sel,callback:function(t){e.ant_sel=t},expression:"ant_sel"}},[t("el-checkbox",{attrs:{label:"ANT1"}}),t("el-checkbox",{attrs:{label:"ANT2"}}),t("el-checkbox",{attrs:{label:"ANT3"}}),t("el-checkbox",{attrs:{label:"ANT4"}}),t("el-checkbox",{attrs:{label:"ANT5"}}),t("el-checkbox",{attrs:{label:"ANT6"}}),t("el-checkbox",{attrs:{label:"ANT7"}}),t("el-checkbox",{attrs:{label:"ANT8"}})],1)],1),t("el-form-item",{attrs:{label:"标签数量:","label-width":"30%"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{disabled:""},model:{value:e.tagCount,callback:function(t){e.tagCount=t},expression:"tagCount"}})],1),t("el-form-item",{attrs:{label:"读取速度:","label-width":"30%"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{disabled:""},model:{value:e.speed,callback:function(t){e.speed=t},expression:"speed"}}),t("span",[e._v("t/s")])],1)],1),t("div",{ref:"barBox",staticClass:"underContainer"})],1)])])},r=[],o=a(7004);function s(){return(0,o.Z)({url:"/rfid_epc",method:"get"})}function i(e){return(0,o.Z)({url:"/rfid_read",method:"post",data:e})}var n={name:"dataManage",data(){return{loading:!1,faceDataTable:[],totalNum:0,page:1,ant_sel:[],rfidForm:{read_mode:"continuous",on_off:!1,interval_time:"200",ant_sel:"0"},timeMode:[{label:"单次模式",value:"once"},{label:"连续模式",value:"continuous"}],tagCount:"",speed:0,cellStyle:{paddingTop:"5px",paddingBottom:"5px",fontSize:"16px"},headerStyle:{margin:0,paddingTop:"7px",paddingBottom:"7px"},chart:null,time:null}},mounted(){this.getData(),this.time=setInterval((()=>{this.getData()}),1e3),this.chart=this.$echarts.init(this.$refs.barBox),this.initChart()},beforeDestroy(){clearInterval(this.time)},computed:{currentPageData(){const{faceDataTable:e,page:t}=this;return e.slice(16*(t-1),16*t)}},methods:{initChart(){const e={tooltip:{formatter:" {a} <br/>{b} : {c}t/s"},series:[{min:0,max:800,name:"读取速度",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}"},data:[{value:this.speed}]}]};this.chart.setOption(e)},getData(){s().then((e=>{this.speed=parseInt(e.data.read_rate),this.tagCount=e.data.epc_cnt,this.faceDataTable=e.data.data,this.totalNum=e.data.data.length,this.initChart()}))},handleCheckboxChange(){const e=new Map;for(let a=1;a<=8;a++){const t=`ANT${a}`,l=2**(a-1);e.set(t,l)}let t=0;for(let a=0;a<this.ant_sel.length;a++)t+=e.get(this.ant_sel[a]);this.rfidForm.ant_sel=t},rfidRead(){const e={on_off:this.rfidForm.on_off?"on":"off",read_mode:this.rfidForm.read_mode,interval_time:this.rfidForm.interval_time.toString(),ant_sel:this.rfidForm.ant_sel.toString()};i(e).then((e=>{alert(e.data.result),"failed"===e.data.result&&(this.rfidForm.on_off=!1)}))},pageChange(e){this.page=e}}},d=n,c=a(1001),u=(0,c.Z)(d,l,r,!1,null,"79498c4e",null),m=u.exports},2384:function(e,t,a){a(2794);e.exports={title:"Admin",fixedHeader:!1,sidebarLogo:!1,baseUrl:"http://192.168.4.1"}},2794:function(e){e.exports={urlBeforeHash:""}},7004:function(e,t,a){"use strict";var l=a(7422),r=a(3751),o=a(2384);const s=o.baseUrl,i=l.Z.create({baseURL:s,timeout:15e3});i.interceptors.request.use((e=>{if(localStorage.getItem("username")){const t={username:localStorage.getItem("username"),password:localStorage.getItem("password")};e.auth={...t}}return e}),(e=>Promise.reject(e))),i.interceptors.response.use((e=>"ok"===e.status||200===e.status?e:alert("接口寄了")),(e=>{if(e.response)switch(e.response.status){case 401:localStorage.removeItem("token"),alert("身份过期，请重新登录"),r.Z.push("/login")}return Promise.reject(e.response.data)})),t["Z"]=i}}]);
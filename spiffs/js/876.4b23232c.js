(self["webpackChunkvue_module"]=self["webpackChunkvue_module"]||[]).push([[876],{1876:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return i}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mqttConfigContainer"},[e("div",{staticClass:"mqttForm",staticStyle:{"background-color":"#ffffff"}},[e("h3",{staticClass:"form-title"},[t._v("基础设置")]),e("el-form",{staticStyle:{margin:"5px 0 0 15%"},attrs:{size:"mini","label-width":"10vw"}},[e("el-form-item",{attrs:{label:"工作模式:","label-width":"20%"}},[e("el-select",{model:{value:t.systemParam.work_mode,callback:function(e){t.$set(t.systemParam,"work_mode",e)},expression:"systemParam.work_mode"}},t._l(t.workMode,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"网络选择:","label-width":"20%"}},[e("el-select",{model:{value:t.systemParam.net_sel,callback:function(e){t.$set(t.systemParam,"net_sel",e)},expression:"systemParam.net_sel"}},t._l(t.interSelect,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"通信协议:","label-width":"20%"}},[e("el-select",{model:{value:t.systemParam.net_protocol,callback:function(e){t.$set(t.systemParam,"net_protocol",e)},expression:"systemParam.net_protocol"}},t._l(t.letter,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"MQTT地址:","label-width":"20%"}},[e("el-input",{staticStyle:{width:"65%"},model:{value:t.systemParam.mqtt_addr,callback:function(e){t.$set(t.systemParam,"mqtt_addr",e)},expression:"systemParam.mqtt_addr"}})],1),e("el-form-item",{attrs:{label:"TCP地址:","label-width":"20%"}},[e("el-input",{staticStyle:{width:"65%"},model:{value:t.systemParam.tcp_addr,callback:function(e){t.$set(t.systemParam,"tcp_addr",e)},expression:"systemParam.tcp_addr"}})],1),e("el-form-item",{attrs:{label:"TCP端口:","label-width":"20%"}},[e("el-input",{staticStyle:{width:"65%"},model:{value:t.systemParam.tcp_port,callback:function(e){t.$set(t.systemParam,"tcp_port",e)},expression:"systemParam.tcp_port"}})],1),e("el-form-item",{attrs:{label:"重启:","label-width":"20%"}},[e("el-checkbox",{model:{value:t.restart,callback:function(e){t.restart=e},expression:"restart"}})],1),e("el-form-item",{attrs:{"label-width":"20%"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.changeSystem}},[t._v("更新设置")])],1)],1)],1)])},s=[],l=a(6954),n={data(){return{restart:!1,workMode:[{label:"RFID读写器",value:"rfid reader"},{label:"网关",value:"gateway"}],interSelect:[{label:"4G",value:"4G"},{label:"以太网",value:"ethernet"},{label:"4G+以太网",value:"4G+ethernrt"}],letter:[{label:"MQTT",value:"mqtt"},{label:"TCP",value:"tcp"}],systemParam:{}}},mounted(){this.getStatus()},methods:{getStatus(){(0,l.Vm)().then((t=>{this.systemParam={...t.data}}))},changeSystem(){const t={work_mode:this.systemParam.work_mode,net_sel:this.systemParam.net_sel,net_protocol:this.systemParam.net_protocol,mqtt_addr:this.systemParam.mqtt_addr,tcp_addr:this.systemParam.tcp_addr,tcp_port:this.systemParam.tcp_port};this.restart?(0,l.Pj)(t).then((t=>{(0,l.jo)().then((t=>{this.$message({type:"success",message:"状态已更新，设备正在重启"})}))})):(0,l.Pj)(t).then((t=>{alert("更新成功"),this.getStatus()}))}}},o=n,u=a(1001),m=(0,u.Z)(o,r,s,!1,null,"2f60644d",null),i=m.exports},6954:function(t,e,a){"use strict";a.d(e,{Jn:function(){return m},Nr:function(){return i},Pj:function(){return n},Vm:function(){return s},YC:function(){return u},jo:function(){return o},lR:function(){return l},qR:function(){return c}});var r=a(7004);function s(){return(0,r.Z)({url:"/sys_info",method:"get"})}function l(){return(0,r.Z)({url:"/sys_sta",method:"get"})}function n(t){return(0,r.Z)({url:"/sys_info",method:"post",data:t})}function o(){return(0,r.Z)({url:"/sys_restart",method:"get"})}function u(){return(0,r.Z)({url:"/wlan_general",method:"get"})}function m(t){return(0,r.Z)({url:"/wlan_general",method:"post",data:t})}function i(){return(0,r.Z)({url:"/auth_info",method:"get"})}function c(t){return(0,r.Z)({url:"/auth_info",method:"post",data:t})}},2384:function(t,e,a){a(2794);t.exports={title:"Admin",fixedHeader:!1,sidebarLogo:!1,baseUrl:"http://192.168.4.1"}},2794:function(t){t.exports={urlBeforeHash:""}},7004:function(t,e,a){"use strict";var r=a(7422),s=a(3751),l=a(2384);const n=l.baseUrl,o=r.Z.create({baseURL:n,timeout:15e3});o.interceptors.request.use((t=>{if(localStorage.getItem("username")){const e={username:localStorage.getItem("username"),password:localStorage.getItem("password")};t.auth={...e}}return t}),(t=>Promise.reject(t))),o.interceptors.response.use((t=>"ok"===t.status||200===t.status?t:alert("接口寄了")),(t=>{if(t.response)switch(t.response.status){case 401:localStorage.removeItem("token"),alert("身份过期，请重新登录"),s.Z.push("/login")}return Promise.reject(t.response.data)})),e["Z"]=o}}]);